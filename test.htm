<html>
<head>
<link rel="stylesheet" href="node_modules/qunitjs/qunit/qunit.css">
</head>
<body>
<div id="qunit" />
<div id="qunit-fixture" />
<script src="node_modules/qunitjs/qunit/qunit.js"></script>
<script src="js.js"></script>
<script>
"use strict"
var Cards, Targeting, targetingMode, targetingModeCb, player1, player2, players, winner;
function setWinner(play){
	winner = play;
}
function initTest(){
	player1 = new Player();
	player2 = new Player();
	player1.foe = player2;
	player2.foe = player1;
	players = [player1, player2];
}
loadcards(function(cards, targeting) {
	Cards = cards;
	Targeting = targeting;
	test("Deckout", function() {
		initTest();
		player1.endturn();
		ok(winner == player1);
	});
	test("Devourer", function() {
		initTest();
		var devourer = new Creature(Cards.Devourer, player1);
		player1.creatures[0] = devourer;
		player2.quanta[Light] = 1;
		player1.endturn();
		ok(player2.quanta[Light] == 0, "Light");
		ok(player1.quanta[Darkness] == 1, "Darkness");
	});
	test("Hope", function() {
		initTest();
		player1.shield = new Shield(Cards.Hope, player1);
		for(var i=0; i<3; i++){
			player1.creatures[i] = new Creature(Cards.RayofLight, player1);
		}
		player1.endturn();
		ok(player1.shield.dr == 3, "DR");
		ok(player1.quanta[Light] == 3, "RoL");
	});
	test("Obsession", function() {
		initTest();
		player1.hand = [Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast, Cards.GhostofthePast];
		player1.endturn(0);
		ok(player1.hp == 90, "Damage");
		ok(player1.hand.length == 7, "Discarded");
	});
	test("Voodoo", function() {
		initTest();
		var voodoo = new Creature(Cards.VoodooDoll, player1);
		player1.creatures[0] = voodoo;
		Actives.lightning.call(player1, voodoo);
		Actives.infect.call(player1, voodoo);
		ok(voodoo.hp == 11, "dmg");
		ok(player2.hp == 95, "foe dmg");
		ok(voodoo.poison == 1, "psn");
		ok(player2.poison == 1, "foe psn");
		Actives.holylight.call(player1, voodoo);
		ok(voodoo.hp == 1, "holy dmg");
		ok(player2.hp == 85, "foe holy dmg");
	});
});
</script>
</body>
</html>